<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Projeto: Abertura de Chamados em Massa GLPI</title>
    <link rel="icon" type="image/png" href="../../favicon.png">
    <!-- Carrega o Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Fontes do Hub -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&family=Roboto+Mono:wght@400;600&display=swap" rel="stylesheet">

    <!-- Biblioteca Highlight.js para sintaxe do Python -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/atom-one-dark.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>

    <style>
        body {
            font-family: 'Inter', sans-serif;
            /* Fundo 'ard√≥sia' (azulado) que voc√™ pediu, com a anima√ß√£o */
            background-color: #0f172a; /* slate-900 */
            background-image:
                radial-gradient(at 0% 0%, hsla(24, 90%, 15%, 0.6) 0, transparent 50%),
                radial-gradient(at 50% 100%, hsla(20, 80%, 10%, 0.8) 0, transparent 50%),
                radial-gradient(at 100% 0%, hsla(0, 0%, 15%, 1) 0, transparent 50%);
            background-attachment: fixed;
            color: #e2e8f0; /* slate-200 */
            min-height: 100vh;
            /* Removida a anima√ß√£o para ficar igual ao Validador */
            /* animation: subtle-bg-move 25s cubic-bezier(0.4, 0, 0.2, 1) infinite; */
        }

        /* Anima√ß√£o removida */
        /*
        @keyframes subtle-bg-move {
            0%   { background-position: 0% 50%, 0% 50%, 0% 50%; }
            50%  { background-position: 100% 50%, 100% 50%, 100% 50%; }
            100% { background-position: 0% 50%, 0% 50%, 0% 50%; }
        }
        */

        .font-mono { font-family: 'Roboto Mono', monospace; }

        /* Estilo Glass Panel */
        .glass-panel {
            background: rgba(20, 20, 25, 0.7);
            backdrop-filter: blur(16px);
            -webkit-backdrop-filter: blur(16px);
            border: 1px solid rgba(255, 140, 0, 0.15);
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.8);
        }

        /* Bot√£o Secund√°rio Estilo "Glass" (Bot√£o Voltar) */
        .btn-glass-secondary {
            background: rgba(20, 20, 25, 0.5);
            backdrop-filter: blur(8px);
            -webkit-backdrop-filter: blur(8px);
            border: 1px solid rgba(255, 140, 0, 0.2);
            transition: all 0.3s ease;
        }
        .btn-glass-secondary:hover {
            border-color: rgba(255, 140, 0, 0.7);
            box-shadow: 0 0 20px rgba(234, 88, 12, 0.4);
            transform: translateY(-2px);
            color: #fb923c; /* orange-300 */
        }

        /* Bot√£o Prim√°rio Laranja (Copiar) */
        .btn-tecnoit {
            background-image: linear-gradient(135deg, #ea580c 0%, #c2410c 100%);
            background-size: 200% auto;
            transition: all 0.4s ease;
            position: relative;
            overflow: hidden;
        }
        .btn-tecnoit:hover:not(:disabled) {
            background-position: right center;
            transform: translateY(-2px);
            box-shadow: 0 0 25px rgba(234, 88, 12, 0.5);
        }

        /* Anima√ß√£o de entrada */
        .animate-fade-in-up {
            animation: fadeInUp 0.6s cubic-bezier(0.16, 1, 0.3, 1) forwards;
            opacity: 0;
            transform: translateY(20px);
        }
        .delay-100 { animation-delay: 0.1s; }
        .delay-200 { animation-delay: 0.2s; }
        .delay-300 { animation-delay: 0.3s; }
        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Scrollbar customizada para o bloco de c√≥digo */
        pre code::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }
        pre code::-webkit-scrollbar-track {
            background: rgba(0,0,0,0.2);
            border-radius: 4px;
        }
        pre code::-webkit-scrollbar-thumb {
            background: #ea580c;
            border-radius: 4px;
        }
        pre code::-webkit-scrollbar-thumb:hover {
            background: #c2410c;
        }

        .watermark-container::after {
            content: "¬© 2025 TecnoIT. Desenvolvido por Marcelo Rodrigues.";
            font-size: 0.65rem; /* ~10px */
            color: #94a3b8; /* slate-400 */
            opacity: 0.3;
            font-weight: 300;
            letter-spacing: 0.2em;
            text-transform: uppercase;
            cursor: default;
            pointer-events: none;
            user-select: none;
            -webkit-user-select: none;
            transition: color 0.3s ease;
        }
        .watermark-container:hover::after {
            color: #f97316; /* orange-500 */
            opacity: 0.8;
        }
        /* Prote√ß√£o contra oculta√ß√£o simples */
        body:not(:has(.watermark-container))::after {
            content: "¬© 2025 TecnoIT. Desenvolvido por Marcelo Rodrigues.";
            position: fixed;
            bottom: 20px;
            right: 20px;
            color: white;
            background: red;
            padding: 10px;
            z-index: 9999;
        }
    </style>
</head>
<body class="p-4 md:p-8 selection:bg-orange-500 selection:text-white">

    <!-- Container Principal -->
    <div class="w-full max-w-4xl mx-auto relative">

        <!-- Cabe√ßalho com Bot√£o Voltar e Logo -->
        <header class="flex items-center justify-between mb-6 animate-fade-in-up">
            <div>
                <!-- O link volta para o diret√≥rio raiz (o Hub) -->
                <a href="../../index.html" class="btn-glass-secondary inline-flex items-center text-sm font-bold py-2 px-4 rounded-lg transition-all group text-orange-400">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-2 transform group-hover:-translate-x-1 transition-transform" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18" />
                    </svg>
                    Voltar ao Hub
                </a>
            </div>
            <div class="h-10 w-10 flex items-center justify-center rounded-full bg-black/30 ring-1 ring-orange-500/30">
                <!-- Tenta carregar a logo do diret√≥rio raiz -->
                <img src="../../logo.png" alt="Logo TecnoIT" class="h-8 w-8 object-contain" onerror="this.style.display='none'; document.getElementById('fallback-icon-header').style.display='block';">
                <svg id="fallback-icon-header" style="display:none;" xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-orange-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 3v2m6-2v2M9 19v2m6-2v2M5 9H3m2 6H3m18-6h-2m2 6h-2M7 19h10a2 2 0 002-2V7a2 2 0 00-2-2H7a2 2 0 00-2 2v10a2 2 0 002 2zM9 9h6v6H9V9z" />
                </svg>
            </div>
        </header>

        <!-- Painel do Projeto -->
        <div class="glass-panel p-6 md:p-8 rounded-3xl w-full relative overflow-hidden animate-fade-in-up delay-100">
            <!-- Decora√ß√£o de Topo -->
            <div class="absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-orange-600 via-orange-500 to-yellow-500"></div>

            <!-- T√≠tulo e Descri√ß√£o -->
            <div class="text-center mb-8">
                <h1 class="text-4xl font-bold text-white tracking-tight mt-4">
                    Abertura de Chamados em Massa <span class="text-orange-500">GLPI</span>
                </h1>
                <p class="text-gray-400 mt-2 text-xs uppercase tracking-[0.2em] font-semibold">Script de Automa√ß√£o para Abertura de Chamados em Massa no GLPI</p>
            </div>

            <!-- Bot√£o de Copiar (Topo) -->
            <div class="flex justify-end mb-2">
                <button id="copyButtonTop" class="btn-tecnoit text-white font-bold py-2 px-4 rounded-lg text-xs uppercase flex items-center gap-2">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 4h8a2 2 0 012 2v8a2 2 0 01-2 2h-8a2 2 0 01-2-2v-8a2 2 0 012-2z" />
                    </svg>
                    <span id="copyButtonTextTop">Copiar C√≥digo</span>
                </button>
            </div>

            <!-- C√≥digo Python -->
            <div class="rounded-xl overflow-hidden bg-[#282c34] border border-slate-700">
                <pre><code id="pythonCode" class="language-python" style="max-height: 400px; display: block;">
import os
import requests
import getpass
import json
import mimetypes
from collections import OrderedDict
from pathlib import Path # Usado para manipula√ß√£o moderna de caminhos

# =============================
# CONFIGURA√á√ÉO
# =============================
BASE_URL = "https://suporte.tecnoit.com.br/apirest.php"
# Usando Path para definir o caminho base
CAMINHO_BASE = Path(r"C:\Users\MarceloRodriguesdosP\Downloads\CHAMADOS OUTUBRO")

# =============================
# FUN√á√ïES AUXILIARES
# =============================

def autenticar_glpi(usuario, senha):
    """Obt√©m um session_token tempor√°rio usando login/senha."""
    url = f"{BASE_URL}/initSession"
    dados = {"login": usuario, "password": senha}
    headers = {"Content-Type": "application/json"}

    print("\nüîê Realizando login no GLPI...")

    try:
        resp = requests.post(url, json=dados, headers=headers)

        if resp.status_code == 200 and "session_token" in resp.json():
            token = resp.json()["session_token"]
            print("‚úÖ Login realizado com sucesso!")
            return token
        else:
            print(f"‚ùå Falha no login (HTTP {resp.status_code}). Resposta:")
            print(resp.text)
            exit()
    except requests.exceptions.RequestException as e:
        print(f"‚ùå Erro de conex√£o ao tentar logar: {e}")
        exit()

def listar_entidades(token):
    """Lista entidades e pede ao usu√°rio para selecionar uma."""
    headers = {"Session-Token": token}
    url = f"{BASE_URL}/Entity"
    resp = requests.get(url, headers=headers)

    if resp.status_code != 200:
        print("‚ùå Erro ao listar entidades.")
        print(resp.text)
        exit()

    entidades = resp.json()
    if not entidades:
        print("‚ùå Nenhuma entidade encontrada para este usu√°rio.")
        exit()

    print("\nüè¢ Entidades encontradas:")
    for i, e in enumerate(entidades, start=1):
        print(f"{i}. {e['completename']} (ID: {e['id']})")

    while True:
        try:
            escolha = int(input("\nDigite o n√∫mero da entidade onde deseja criar os chamados: "))
            if 1 <= escolha <= len(entidades):
                entidade_escolhida = entidades[escolha - 1]
                print(f"‚úÖ Entidade selecionada: {entidade_escolhida['completename']}\n")
                # Retorna o ID e o Nome da entidade
                return entidade_escolhida["id"], entidade_escolhida["completename"]
            else:
                print("Op√ß√£o inv√°lida. Digite um n√∫mero da lista.")
        except ValueError:
            print("Entrada inv√°lida. Digite apenas o n√∫mero.")

def listar_pastas_principais(caminho_base):
    """Lista as pastas dentro do CAMINHO_BASE para o usu√°rio escolher."""
    if not caminho_base.exists():
        print(f"‚ùå O caminho base n√£o foi encontrado: {caminho_base}")
        exit()

    pastas = [p.name for p in caminho_base.iterdir() if p.is_dir()]
    if not pastas:
        print(f"‚ùå Nenhuma pasta encontrada em: {caminho_base}")
        exit()

    print("üìÇ Tipos de pastas encontradas:")
    for i, pasta in enumerate(pastas, start=1):
        print(f"{i}. {pasta}")

    while True:
        try:
            escolha = int(input("\nDigite o n√∫mero do tipo de pasta que deseja criar chamados: "))
            if 1 <= escolha <= len(pastas):
                pasta_escolhida = pastas[escolha - 1]
                print(f"‚úÖ Pasta selecionada: {pasta_escolhida}\n")
                return pasta_escolhida
            else:
                print("Op√ß√£o inv√°lida. Digite um n√∫mero da lista.")
        except ValueError:
            print("Entrada inv√°lida. Digite apenas o n√∫mero.")

def montar_estrutura_chamados(caminho_base, tipo_pasta):
    """L√™ as subpastas e prepara a lista de chamados a serem criados."""
    caminho_tipo = caminho_base / tipo_pasta
    chamados = []

    # Usando rglob para encontrar todas as subpastas
    for subdir in caminho_tipo.iterdir():
        if not subdir.is_dir():
            continue

        # Encontra imagens na subpasta
        imagens = [f for f in subdir.glob("*") if f.suffix.lower() in (".jpg", ".jpeg", ".png")]

        if imagens:
            nome_pasta = subdir.name # Nome da subpasta

            # L√≥gica para nomear o chamado
            if "camera" in tipo_pasta.lower():
                nome_chamado = f"Camera {nome_pasta}"
            elif "terminal" in tipo_pasta.lower():
                nome_chamado = f"PCI Terminal {nome_pasta}"
            elif "pci" in tipo_pasta.lower():
                nome_chamado = f"PCI {nome_pasta}"
            else:
                nome_chamado = nome_pasta

            chamados.append({
                "tipo": tipo_pasta,
                "nome": nome_chamado,
                "descricao": "Manuten√ß√£o preventiva",
                "fotos": imagens, # Lista de nomes de arquivos
                "caminho_pasta": subdir # O objeto Path completo da pasta
            })

    if not chamados:
        print(f"‚ö†Ô∏è Nenhum chamado com imagens encontrado na pasta '{tipo_pasta}'. Verifique as subpastas.")

    return chamados

def mostrar_previa(chamados, entidade_nome):
    """Mostra um resumo dos chamados que ser√£o criados."""
    if not chamados:
        return

    print("\n" + "="*25 + " PR√âVIA " + "="*25)
    # Mostra pr√©via dos 3 primeiros para n√£o poluir o terminal
    for ch in chamados[:3]:
        print(f"üè∑Ô∏è Nome do chamado: {ch['nome']}")
        print(f"üìù Descri√ß√£o: {ch['descricao']}")
        print(f"üè¢ Entidade: {entidade_nome}")
        print(f"üìé Fotos: {len(ch['fotos'])} ({', '.join([f.name for f in ch['fotos'][:2]])}{'...' if len(ch['fotos']) > 2 else ''})")
        print(f"üìç Caminho: {ch['caminho_pasta']}")
        print("-" * 60)

    if len(chamados) > 3:
        print(f"... e mais {len(chamados) - 3} chamados.")
    print("="*60)


def criar_chamado_glpi(token, entidade_id, chamado):
    """Cria o Ticket principal no GLPI."""
    headers = {"Session-Token": token}
    url = f"{BASE_URL}/Ticket"
    payload = {
        "input": {
            "name": chamado["nome"],
            "content": chamado["descricao"],
            "itilcategories_id": 0, # Categoria (0 = Padr√£o)
            "entities_id": entidade_id, # Entidade selecionada
            "status": 1 # 1 = Novo
        }
    }

    try:
        resp = requests.post(url, json=payload, headers=headers)
        if resp.status_code == 201:
            ticket_id = resp.json().get("id")
            print(f"‚úÖ Chamado criado: {chamado['nome']} (ID: {ticket_id})")
            # Inicia o upload das fotos para este ticket
            enviar_fotos_anexadas_ao_ticket(token, ticket_id, entidade_id, chamado)
        else:
            print(f"‚ùå Erro ao criar chamado {chamado['nome']} (HTTP {resp.status_code})")
            print(f"   [Debug] Resposta: {resp.text}")
    except requests.exceptions.RequestException as e:
        print(f"‚ùå Erro de conex√£o ao criar chamado {chamado['nome']}: {e}")

# ============================================
# O PONTO CR√çTICO: UPLOAD DE ARQUIVOS
# ============================================
def enviar_fotos_anexadas_ao_ticket(token, ticket_id, entidade_id, chamado):
    """Anexa as fotos diretamente ao TICKET (elas aparecer√£o na aba Documentos)."""

    # Esta √© a rota "aninhada", que se mostrou a √∫nica funcional
    url = f"{BASE_URL}/Ticket/{ticket_id}/Document"
    headers = {"Session-Token": token}

    print(f"   [Debug] Anexando fotos diretamente ao TICKET ID: {ticket_id}...")

    for foto in chamado["fotos"]:
        caminho_foto = chamado["caminho_pasta"] / foto.name
        mime_type, _ = mimetypes.guess_type(caminho_foto)
        if mime_type is None:
            mime_type = "application/octet-stream"

        try:
            # 1. Preparar o manifesto JSON (o "c√©rebro" do upload)
            upload_manifest_data = {
                "input": {
                    "name": f"Foto Preventiva - {foto.name}",
                    "itemtype": "Ticket", # Redundante, mas cr√≠tico
                    "items_id": ticket_id, # Redundante, mas cr√≠tico
                    "entities_id": entidade_id, # CR√çTICO: Para lincar o doc √† entidade
                    "_filename": foto.name
                }
            }
            manifest_json = json.dumps(upload_manifest_data)

            print(f"   [Debug] Enviando foto: {foto.name} para TICKET ID: {ticket_id}")
            print(f"   [Debug] Manifest JSON: {manifest_json}")

            with open(caminho_foto, "rb") as f:
                # 2. Preparar os ARQUIVOS (for√ßando a ordem)
                files_list = [
                    # CR√çTICO: O nome DEVE ser 'uploadManifest' (com 'M' mai√∫sculo)
                    ('uploadManifest', (None, manifest_json, 'application/json')),
                    # CR√çTICO: O nome DEVE ser 'filename[0]'
                    ('filename[0]', (foto.name, f, mime_type))
                ]

                resp = requests.post(url, headers=headers, files=files_list)

            if resp.status_code == 201:
                print(f"   üìé Anexo enviado: {foto.name} (anexado ao Ticket {ticket_id})")
            else:
                print(f"   ‚ö†Ô∏è Falha ao anexar {foto.name} (HTTP {resp.status_code})")
                try:
                    print("   [Debug] Resposta:", resp.json())
                except json.JSONDecodeError:
                    print("   [Debug] Resposta bruta:", resp.text)

        except FileNotFoundError:
            print(f"   ‚ùå Erro: Arquivo n√£o encontrado: {caminho_foto}")
        except Exception as e:
            print(f"   ‚ùå Erro inesperado ao enviar {foto.name}: {e}")

# =============================
# EXECU√á√ÉO PRINCIPAL
# =============================

if __name__ == "__main__":
    print("=== GLPI - CRIA√á√ÉO AUTOM√ÅTICA DE CHAMADOS DE PREVENTIVA ===\n")

    usuario = input("Usu√°rio GLPI: ")
    senha = getpass.getpass("Senha: ")

    token = autenticar_glpi(usuario, senha)
    entidade_id, entidade_nome = listar_entidades(token)
    tipo_pasta = listar_pastas_principais(CAMINHO_BASE)
    chamados = montar_estrutura_chamados(CAMINHO_BASE, tipo_pasta)

    if not chamados:
        print("\nNenhum chamado a ser criado. Encerrando.")
        exit()

    print("\nüßæ PR√âVIA DOS CHAMADOS ENCONTRADOS:\n")
    mostrar_previa(chamados, entidade_nome)

    confirmar = input("\nüöÄ Deseja criar esses chamados e enviar as fotos? (S/N): ").strip().lower()
    if confirmar == "s":
        print("\nIniciando cria√ß√£o de chamados...")
        for ch in chamados:
            criar_chamado_glpi(token, entidade_id, ch)
        print("\n‚úÖ Todos os chamados foram criados e as imagens enviadas.")
    else:
        print("\n‚ùå A cria√ß√£o de chamados foi cancelada.")

                </code></pre>
            </div>

            <!-- Se√ß√£o "Como Usar" -->
            <div class="mt-8">
                <h2 class="text-2xl font-bold text-white mb-4 border-l-4 border-orange-500 pl-3">Como Usar</h2>
                <div class="space-y-4 text-gray-300">
                    <div>
                        <h3 class="font-bold text-orange-400 text-sm uppercase tracking-wider">Pr√©-requisitos</h3>
                        <ul class="list-disc list-inside mt-2 space-y-1 pl-2 font-mono text-sm">
                            <li>Python 3.x instalado.</li>
                            <li>Biblioteca `requests`: <code class="bg-slate-800 px-2 py-0.5 rounded">pip install requests</code></li>
                            <li>Permiss√µes de escrita corretas no servidor GLPI (ex: <code class="bg-slate-800 px-2 py-0.5 rounded">chown www-data</code>).</li>
                        </ul>
                    </div>
                    <div>
                        <h3 class="font-bold text-orange-400 text-sm uppercase tracking-wider">Estrutura de Pastas</h3>
                        <p class="mt-2 text-sm">O script espera uma estrutura espec√≠fica. Altere <code class="bg-slate-800 px-2 py-0.5 rounded font-mono text-xs">CAMINHO_BASE</code> no script para sua pasta principal.</p>
                        <pre class="bg-slate-900/50 border border-slate-700 rounded-lg p-3 mt-2 text-xs font-mono overflow-x-auto">
C:\...\CHAMADOS OUTUBRO\  <-- (CAMINHO_BASE)
‚îî‚îÄ‚îÄ‚îÄPCI\                    <-- (Tipo de Pasta)
    ‚îú‚îÄ‚îÄ‚îÄC-BU-01TA\          <-- (Torna-se "PCI C-BU-01TA")
    ‚îÇ   ‚îú‚îÄ‚îÄ‚îÄScreenshot_1.jpg
    ‚îÇ   ‚îî‚îÄ‚îÄ‚îÄScreenshot_2.jpg
    ‚îî‚îÄ‚îÄ‚îÄC-BU-02TA\
        ‚îî‚îÄ‚îÄ‚îÄfoto.jpg
</pre>
                    </div>
                    <div>
                        <h3 class="font-bold text-orange-400 text-sm uppercase tracking-wider">Execu√ß√£o</h3>
                        <ol class="list-decimal list-inside mt-2 space-y-1 pl-2 text-sm">
                            <li>Salve o c√≥digo como <code class="bg-slate-800 px-2 py-0.5 rounded font-mono text-xs">glpi_automator.py</code>.</li>
                            <li>Abra um terminal (CMD, PowerShell, etc).</li>
                            <li>Execute o script: <code class="bg-slate-800 px-2 py-0.5 rounded font-mono text-xs">python glpi_automator.py</code></li>
                            <li>Siga as instru√ß√µes (Login, Entidade, Tipo de Pasta).</li>
                            <li>Confirme a pr√©via para iniciar o upload.</li>
                        </ol>
                    </div>
                </div>
            </div>

            <!-- Se√ß√£o "Pontos Cr√≠ticos" -->
            <div class="mt-8">
                <h2 class="text-2xl font-bold text-white mb-4 border-l-4 border-orange-500 pl-3">Pontos Cr√≠ticos da API</h2>
                <p class="text-gray-400 mb-4 text-sm">Este script foi desenvolvido para uma vers√£o espec√≠fica do GLPI (v10) e sua API √© muito rigorosa. Alterar os pontos abaixo pode causar falhas no upload.</p>
                <div class="grid md:grid-cols-2 gap-4 text-sm">
                    <!-- Ponto Cr√≠tico 1 -->
                    <div class="bg-slate-900/50 border border-slate-800 rounded-lg p-4">
                        <h4 class="font-bold text-orange-400">1. A Rota da API</h4>
                        <p class="mt-1 text-gray-300">A √∫nica rota funcional para anexar a um chamado existente √© a rota "aninhada":</p>
                        <code class="block bg-slate-800 px-2 py-1 rounded mt-2 font-mono text-xs text-red-400">/Ticket/{ticket_id}/Document</code>
                    </div>
                    <!-- Ponto Cr√≠tico 2 -->
                    <div class="bg-slate-900/50 border border-slate-800 rounded-lg p-4">
                        <h4 class="font-bold text-orange-400">2. O Nome do Manifesto</h4>
                        <p class="mt-1 text-gray-300">O servidor (Linux) √© case-sensitive. O manifesto JSON *deve* se chamar <code class="bg-slate-800 px-2 py-0.5 rounded font-mono text-xs">uploadManifest</code> (com 'M' mai√∫sculo).</p>
                    </div>
                    <!-- Ponto Cr√≠tico 3 -->
                    <div class="bg-slate-900/50 border border-slate-800 rounded-lg p-4">
                        <h4 class="font-bold text-orange-400">3. A Ordem do Upload</h4>
                        <p class="mt-1 text-gray-300">A API exige que o <code class="bg-slate-800 px-2 py-0.5 rounded font-mono text-xs">uploadManifest</code> (JSON) venha *antes* do <code class="bg-slate-800 px-2 py-0.5 rounded font-mono text-xs">filename[0]</code> (o arquivo) na requisi√ß√£o.</p>
                    </div>
                    <!-- Ponto Cr√≠tico 4 -->
                    <div class="bg-slate-900/50 border border-slate-800 rounded-lg p-4">
                        <h4 class="font-bold text-orange-400">4. O Manifesto (entities_id)</h4>
                        <p class="mt-1 text-gray-300">O JSON do manifesto *precisa* conter o <code class="bg-slate-800 px-2 py-0.5 rounded font-mono text-xs">entities_id</code>. Sem ele, o anexo √© criado na entidade raiz e "desaparece" do chamado.</p>
                    </div>
                </div>
            </div>

            <!-- Rodap√© -->
            <div class="mt-8 text-center relative z-50">
                <div class="watermark-container"></div>
            </div>
        </div>

    </div> <!-- Fim do Container Principal -->

    <script>
        // Ativa o highlight.js
        document.addEventListener('DOMContentLoaded', (event) => {
            document.querySelectorAll('pre code').forEach((el) => {
                hljs.highlightElement(el);
            });
        });

        // Funcionalidade do Bot√£o de Copiar
        const copyButtonTop = document.getElementById('copyButtonTop');
        const copyButtonTextTop = document.getElementById('copyButtonTextTop');
        const pythonCode = document.getElementById('pythonCode');

        const copyHandler = (button, textElement) => {
            const code = pythonCode.innerText;

            // Usando a API de Clipboard (moderna e segura)
            navigator.clipboard.writeText(code).then(() => {
                textElement.innerText = "COPIADO!";
                button.classList.add('bg-green-600', 'hover:bg-green-700');
                button.classList.remove('btn-tecnoit');

                setTimeout(() => {
                    textElement.innerText = "Copiar C√≥digo";
                    button.classList.remove('bg-green-600', 'hover:bg-green-700');
                    button.classList.add('btn-tecnoit');
                }, 2000);
            }).catch(err => {
                textElement.innerText = "Falhou!";
                console.error('Falha ao copiar: ', err);
            });
        };

        copyButtonTop.addEventListener('click', () => copyHandler(copyButtonTop, copyButtonTextTop));
    </script>
</body>
</html>